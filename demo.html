<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mdtail - Split Terminal Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #1e1e1e;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .terminal-container {
            background: #000;
            border-radius: 8px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            overflow: hidden;
            width: 1200px;
            max-width: 100%;
            height: 600px;
        }

        .terminal-header {
            background: linear-gradient(#504b45 0%, #3c3b37 100%);
            padding: 10px;
            display: flex;
            align-items: center;
        }

        .terminal-controls {
            display: flex;
            gap: 8px;
        }

        .terminal-control {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .close { background: #ff5f56; }
        .minimize { background: #ffbd2e; }
        .maximize { background: #27c93f; }

        .terminal-title {
            flex: 1;
            text-align: center;
            color: #ccc;
            font-size: 14px;
        }

        .terminal-split {
            display: flex;
            height: calc(100% - 40px);
        }

        .terminal-pane {
            flex: 1;
            padding: 20px;
            color: #d4d4d4;
            font-size: 13px;
            line-height: 1.6;
            overflow-y: auto;
            overflow-x: hidden;
            position: relative;
        }

        .terminal-left {
            border-right: 1px solid #333;
            background: #0c0c0c;
        }

        .terminal-right {
            background: #000;
        }

        .prompt {
            color: #569cd6;
        }

        .command {
            color: #d4d4d4;
        }

        .comment {
            color: #608b4e;
        }

        .output {
            color: #d4d4d4;
            margin: 10px 0;
        }

        .border {
            color: #764ba2;
            font-weight: bold;
            display: block;
            overflow: hidden;
            white-space: nowrap;
        }
        
        .border::after {
            content: '══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════';
            display: inline-block;
        }
        
        .divider {
            color: #666;
            display: block;
            overflow: hidden;
            white-space: nowrap;
        }
        
        .divider::after {
            content: '──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────';
            display: inline-block;
        }

        .filename {
            color: #667eea;
            text-align: center;
            font-weight: bold;
            text-transform: uppercase;
        }

        .content {
            color: #d4d4d4;
            white-space: pre-wrap;
            font-family: inherit;
        }

        .content h1 { color: #569cd6; margin: 10px 0; }
        .content h2 { color: #608b4e; margin: 10px 0; }
        .content li { margin-left: 20px; }

        .typing {
            display: inline;
            border-right: 2px solid #0f0;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { border-color: #0f0; }
            51%, 100% { border-color: transparent; }
        }

        .hidden {
            display: none;
        }

        .navigation {
            color: #569cd6;
            text-align: center;
            margin-top: 10px;
        }

        .cursor {
            display: inline-block;
            width: 8px;
            height: 16px;
            background: #0f0;
            animation: blink 1s infinite;
            vertical-align: text-bottom;
        }

        .tmux-status {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: #222;
            color: #fff;
            padding: 2px 10px;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
        }

        .tmux-left {
            color: #0f0;
        }

        .tmux-center {
            color: #569cd6;
        }

        .tmux-right {
            color: #764ba2;
        }

        @media (max-width: 768px) {
            .terminal-split {
                flex-direction: column;
            }
            .terminal-left {
                border-right: none;
                border-bottom: 1px solid #333;
            }
        }
    </style>
</head>
<body>
    <div class="terminal-container">
        <div class="terminal-header">
            <div class="terminal-controls">
                <div class="terminal-control close"></div>
                <div class="terminal-control minimize"></div>
                <div class="terminal-control maximize"></div>
            </div>
            <div class="terminal-title">Terminal - tmux session: mdtail-demo</div>
        </div>
        <div class="terminal-split">
            <!-- Left Pane - Command Line -->
            <div class="terminal-pane terminal-left" id="left-pane">
                <div id="left-content"></div>
                <div class="tmux-status">
                    <span class="tmux-left">[0] 0:bash*</span>
                    <span class="tmux-center">"mdtail-demo"</span>
                    <span class="tmux-right">14:23</span>
                </div>
            </div>
            
            <!-- Right Pane - mdtail -->
            <div class="terminal-pane terminal-right" id="right-pane">
                <div id="right-content"></div>
                <div class="tmux-status">
                    <span class="tmux-left">[1] 1:mdtail</span>
                    <span class="tmux-center">"mdtail-demo"</span>
                    <span class="tmux-right">14:23</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        async function typeText(text, element, speed = 50) {
            for (let i = 0; i < text.length; i++) {
                element.innerHTML += text[i];
                await new Promise(r => setTimeout(r, speed));
            }
        }

        async function runRightPane() {
            const container = document.getElementById('right-content');
            
            // Initial prompt
            const prompt1 = document.createElement('span');
            prompt1.className = 'prompt';
            prompt1.innerHTML = '$ ';
            container.appendChild(prompt1);
            
            await new Promise(r => setTimeout(r, 500));
            
            // Type npm install command
            const npmCmd = document.createElement('span');
            npmCmd.className = 'command';
            container.appendChild(npmCmd);
            await typeText('npm install -g mdtail', npmCmd, 60);
            
            await new Promise(r => setTimeout(r, 500));
            container.appendChild(document.createTextNode('\n'));
            
            // Show npm installation output
            const npmOutput = document.createElement('div');
            npmOutput.className = 'output';
            npmOutput.style.color = '#888';
            npmOutput.textContent = 'added 1 package in 2s';
            container.appendChild(npmOutput);
            
            await new Promise(r => setTimeout(r, 1000));
            
            // Second prompt - no extra newline
            const prompt2 = document.createElement('span');
            prompt2.className = 'prompt';
            prompt2.innerHTML = '$ ';
            container.appendChild(prompt2);
            
            await new Promise(r => setTimeout(r, 500));
            
            // Type mdtail command
            const mdtailCmd = document.createElement('span');
            mdtailCmd.className = 'command';
            container.appendChild(mdtailCmd);
            await typeText('mdtail *.md', mdtailCmd, 60);
            
            await new Promise(r => setTimeout(r, 500));
            container.appendChild(document.createTextNode('\n\n'));
            
            // Show mdtail output with tabs
            showMdtailOutput();
        }

        function showMdtailOutput() {
            const container = document.getElementById('right-content');
            const mdtailOutput = document.createElement('div');
            mdtailOutput.innerHTML = `
<span class="border"></span>
<div style="color: #d4d4d4; padding: 2px 0;">
  <span style="font-weight: bold; color: #fff;">[README.md]</span> │ TODO.md
</div>
<span class="divider"></span>

<div class="content" id="mdtail-content"># My Project

A simple demo application showcasing mdtail functionality.

## Quick Start

1. Install dependencies: npm install
2. Run the app: npm start
3. View docs: mdtail *.md

## Features

- Live markdown preview
- File watching
- Tab navigation</div>

<span class="border"></span>
<div class="navigation">Tab 1 of 2 │ ← → Navigate │ Ctrl+C Exit</div>`;
            
            container.appendChild(mdtailOutput);
            
            // Simulate switching to TODO.md after 3 seconds
            setTimeout(() => {
                mdtailOutput.innerHTML = `
<span class="border"></span>
<div style="color: #d4d4d4; padding: 2px 0;">
  README.md │ <span style="font-weight: bold; color: #fff;">[TODO.md]</span>
</div>
<span class="divider"></span>

<div class="content" id="mdtail-content"># TODO List

## This Week
- [x] Setup project
- [x] Write documentation
- [ ] Add tests
- [ ] Deploy to production

## Next Sprint
- [ ] User authentication
- [ ] API integration
- [ ] Performance optimization</div>

<span class="border"></span>
<div class="navigation">Tab 2 of 2 │ ← → Navigate │ Ctrl+C Exit</div>`;
                
                // Simulate live update when Claude edits TODO.md
                // This happens after Claude shows "✓ Updated TODO.md" 
                // Timing: 10s wait + typing + response + tests = ~14s total
                setTimeout(() => {
                    // Flash effect to show file changed
                    mdtailOutput.style.opacity = '0.7';
                    setTimeout(() => {
                        mdtailOutput.style.opacity = '1';
                        mdtailOutput.innerHTML = `
<span class="border"></span>
<div style="color: #d4d4d4; padding: 2px 0;">
  README.md │ <span style="font-weight: bold; color: #fff;">[TODO.md]</span>
</div>
<span class="divider"></span>

<div class="content" id="mdtail-content"># TODO List

## This Week
- [x] Setup project
- [x] Write documentation
- [x] Add tests
- [ ] Deploy to production

## Next Sprint
- [ ] User authentication
- [ ] API integration
- [ ] Performance optimization</div>

<span class="border"></span>
<div class="navigation" style="color: #27c93f;">File updated • Tab 2 of 2 │ ← → Navigate │ Ctrl+C Exit</div>`;
                    }, 100);
                }, 11000); // Update TODO.md after Claude shows "✓ Updated TODO.md" message
            }, 3000);
        }

        async function runLeftPane() {
            const container = document.getElementById('left-content');
            
            // Show previous Claude command already executed
            const prevPrompt = document.createElement('span');
            prevPrompt.className = 'prompt';
            prevPrompt.innerHTML = '$ ';
            container.appendChild(prevPrompt);
            
            const prevCmd = document.createElement('span');
            prevCmd.className = 'command';
            prevCmd.textContent = 'claude';
            container.appendChild(prevCmd);
            container.appendChild(document.createTextNode('\n'));
            
            // Claude welcome message
            const welcomeMsg = document.createElement('div');
            welcomeMsg.style.color = '#569cd6';
            welcomeMsg.innerHTML = 'Claude Code v1.0.1\n';
            container.appendChild(welcomeMsg);
            
            const sessionMsg = document.createElement('div');
            sessionMsg.style.color = '#888';
            sessionMsg.innerHTML = 'Starting new session...\n\n';
            container.appendChild(sessionMsg);
            
            // Show Claude prompt
            const claudePrompt = document.createElement('span');
            claudePrompt.style.color = '#764ba2';
            claudePrompt.innerHTML = '🤖 ';
            container.appendChild(claudePrompt);
            
            const cursor1 = document.createElement('span');
            cursor1.className = 'cursor';
            container.appendChild(cursor1);
            
            // Wait for mdtail to start and switch to TODO.md
            // Initial: 0.5s + npm typing: 1.3s + wait: 0.5s + npm output wait: 1s + 
            // mdtail typing: 0.7s + wait: 0.5s + switch to TODO: 3s = ~7.5s
            // Adding buffer to ensure TODO.md is fully displayed
            await new Promise(r => setTimeout(r, 10000));
            
            // Remove cursor and type claude command
            cursor1.remove();
            const claudeCmd = document.createElement('span');
            claudeCmd.className = 'command';
            container.appendChild(claudeCmd);
            await typeText('add tests for the new feature and update TODO.md', claudeCmd, 50);
            
            await new Promise(r => setTimeout(r, 500));
            container.appendChild(document.createTextNode('\n\n'));
            
            // Claude response
            const claudeOutput = document.createElement('div');
            claudeOutput.className = 'output';
            claudeOutput.style.color = '#d4d4d4';
            claudeOutput.innerHTML = 'I\'ll add tests for the new feature and update the TODO list.\n\n';
            container.appendChild(claudeOutput);
            
            await new Promise(r => setTimeout(r, 1000));
            
            // Show creating test file
            const createTest = document.createElement('div');
            createTest.style.color = '#608b4e';
            createTest.innerHTML = '✓ Created test/feature.test.js\n\n';
            container.appendChild(createTest);
            
            await new Promise(r => setTimeout(r, 500));
            
            // Running tests
            const runningTests = document.createElement('div');
            runningTests.style.color = '#888';
            runningTests.innerHTML = 'Running tests...\n';
            container.appendChild(runningTests);
            
            await new Promise(r => setTimeout(r, 1500));
            
            // Test results
            const testResults = document.createElement('div');
            testResults.style.color = '#27c93f';
            testResults.innerHTML = 'PASS test/feature.test.js\n✓ 15 tests passed\n\n';
            container.appendChild(testResults);
            
            await new Promise(r => setTimeout(r, 500));
            
            // Update TODO.md after tests pass
            const updateTodo = document.createElement('div');
            updateTodo.style.color = '#608b4e';
            updateTodo.innerHTML = '✓ Updated TODO.md\n\n';
            container.appendChild(updateTodo);
            
            // New Claude prompt
            const claudePrompt2 = document.createElement('span');
            claudePrompt2.style.color = '#764ba2';
            claudePrompt2.innerHTML = '🤖 ';
            container.appendChild(claudePrompt2);
            
            // Add blinking cursor
            const cursor = document.createElement('span');
            cursor.className = 'cursor';
            container.appendChild(cursor);
        }

        // Start the demo
        window.addEventListener('load', () => {
            runLeftPane();
            runRightPane();
        });
    </script>
</body>
</html>